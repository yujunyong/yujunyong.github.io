---
title: 函数声明和函数表达式
date: 2016-04-10 23:18:04
tags: [js]
---

> 函数声明(function declaration): `function test() {};`
函数表达式(function expression): `var test = function() {};`

函数声明和函数表达式在绝大多数情况下没有区别，唯独的区别在创建Function的时机上。

代码A
``` javascript
// function declaration

sayHello(); // Hello!

function sayHello(){
  alert('Hello!');
}
```
---

代码B
``` javascript
// function expression

sayHello(); // TypeError: undefined is not a function

var sayHello = function(){
  alert('Hello!');
}
```
这两段代码几乎是一样的，但是使用函数声明的代码A运行正常，而使用函数表达式的代码B则会报错。这是因为以下事实：
**JavaScript是一种解释型语言，函数声明会在JavaScript代码加载后、执行前被解释，而函数表达式只有在执行到这一行代码时才会被解释。**

所以代码A相当于在执行sayHello()前已经建立了一个Function Object并赋给了变量sayHello，其对应代码如下：

``` javascript
var sayHello = new Function("alert('Hello!')");
sayHello();
```

而代码B在执行sayHello()还未存在Function Object和变量sayHello，因为JavaScript在第一次使用某变量时会建立此变量，所以此处建立变量sayHello，但其值时undefined，未引用任何对象，将其作为函数来调用当然会出错。另外，解释JavaScript时如果某个变量已经存在，则其前面的“var”关键字被忽略，所以B代码等价于下列代码：

``` javascript
sayHello = undefined;
sayHello(); // TypeError: undefined is not a function
sayHello = new Function("alert('Hello')");
```

# 注意
大多数浏览器支持将两种语法一起使用，如：
``` javascript
// 除Safari外正确
var func = function func(){

}
```
但是以上语法在Safari上会报错。因此为了浏览器兼容性考虑，任何时候都不要合并使用两种语法。
