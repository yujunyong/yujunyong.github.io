title: "RESTful"
date: 2015-07-29 20:51:39
categories: design
tags: design
---

## 名称
REST， 即Representational State Transfer(表现状态转化)。
REST的名称"表现状态转化"中，省略了主语，"表现状态"其实指的是"资源"（Resources）的"表现状态"；即REST名称表达的是"资源的表现状态转化"

如果一个架构符合REST原则，就称它为RESTful架构，它是一种面向资源的构架。

<!-- more -->

## 资源(Resources)
"资源"就是网络上的一个具体信息，它可以是一段文本、一张图片、一首歌曲、一种服务。资源在URL(统一资源定位符)标识，要获取某个资源，访问它的URL就可以，URL是每一个资源的地址。

在设计URL时，有一种常见的错误，就是URL中包含动词。URL表示的是一个资源，名词以及用形容词修饰的名词可以表示资源，但是动词不行，所以动词不应该放在URL中。如："/shop/open"就是一个不合规范的URL。

当表示资源的集合时使用复数形式，如："/shops"；表示单个资源时使用"{资源名称复数}/{资源标识}"的形式，如："/shops/1234"，"1234"表示店铺id，可以惟一标识店铺；这样可以使资源的表示有层次，更清晰，每种资源的最多2层。资源和资源之间可能会存在着包含关系，比如一个学校下面会有若干个年级每个年级下面会有若干个班级，此时要用"/{父资源名称复数}/{父资源标识}/{子资源名称复数}/{子资源标识}"的形式，如："/schools/123/grades/1/classes/10"。

## 表现层(Representation)
"资源"是一种信息实体，它可以有多种外在表现形式。我们把"资源"具体呈现出来的形式，叫做它的"表现层"（Representation）。比如，文本可以用txt格式表现，也可以用HTML格式、XML格式、JSON格式表现，甚至可以采用二进制格式；图片可以用JPG格式表现，也可以用PNG格式表现。

URI只代表资源的实体，不代表它的形式。严格地说，有些网址最后的".html"后缀名是不必要的，因为这个后缀名表示格式，属于"表现层"范畴，而URI应该只代表"资源"的位置。它的具体表现形式，应该在HTTP请求的头信息中用Accept和Content-Type字段指定，这两个字段才是对"表现层"的描述。

## 状态转化(State Transfer)
访问一个网站，就代表了客户端和服务器的一个互动过程。在这个过程中，势必涉及到数据和状态的变化。

互联网通信协议HTTP协议，是一个无状态协议。这意味着，所有的状态都保存在服务器端。因此，如果客户端想要操作服务器，必须通过某种手段，让服务器端发生"状态转化"（State Transfer）。而这种转化是建立在表现层之上的，所以就是"表现层状态转化"。

客户端用到的手段，只能是HTTP协议。具体来说，就是HTTP协议里面，四个表示操作方式的动词：

* GET：获取资源。成功时返回状态码200(OK)，以及请求的资源
* POST：新建资源（也可以用于更新资源）。成功时返回状态码201(Created)或200(OK)，可以在Headr的Location中返回新建资源的URL
* PUT：更新资源。成功时返回状态码204（No Content）或者200(OK)
* DELETE：删除资源。成功时返回状态码204（No Content）或者200(OK)




